(this["webpackJsonpproduct-manager-app"]=this["webpackJsonpproduct-manager-app"]||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var c=a(0),i=a.n(c),n=a(11),r=a.n(n),o=a(14),d=(a(107),a.p,a(108),a(47)),s=a.n(d),u="https://product-manager-api-in.herokuapp.com",l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return s.a.get("".concat(u,"/api/Product/?productName=").concat(e,"&pageNumber=").concat(t,"&pageLimit=").concat(a))},j=a(16),p=a(184),O=a(192),b=a(210),h=a(207),g=a(187),m=a(194),x=a(190),y=a(193),f=a(191),D=a(189),E=a(87),v=a(195),T=a(196),S=a(4),R=Object(p.a)({root:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"0 0 auto"},cover:{objectFit:"cover"}});var I=function(e){var t=R(),a=Object(o.b)(),i=Object(c.useState)(!1),n=Object(j.a)(i,2),r=n[0],d=n[1];return Object(S.jsxs)(g.a,{className:t.root,onMouseOver:function(){d(!0)},onMouseLeave:function(){d(!1)},children:[Object(S.jsx)(D.a,{component:"img",alt:"Products",height:"140",width:"80",className:t.cover,image:e.category.image,title:e.category.name}),Object(S.jsxs)("div",{className:t.details,children:[Object(S.jsx)(x.a,{children:Object(S.jsxs)(f.a,{children:[Object(S.jsxs)(O.a,{container:!0,children:[Object(S.jsx)(O.a,{item:!0,xs:6,children:Object(S.jsx)(E.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.name})}),Object(S.jsx)(O.a,{item:!0,xs:6,style:{paddingTop:5},children:Object(S.jsxs)(E.a,{component:"h4",children:["INR ",e.price]})})]}),Object(S.jsx)(E.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description})]})}),r&&Object(S.jsxs)(y.a,{children:[Object(S.jsx)(m.a,{"aria-label":"edit",onClick:function(){a({type:"EDITADD_MODAL",payload:{editIndex:e.productIndex,isEdit:!0,showEditModal:!0}})},children:Object(S.jsx)(v.a,{color:"primary"})}),Object(S.jsx)(m.a,{"aria-label":"delete",children:Object(S.jsx)(T.a,{color:"secondary"})})]})]})]})},_=Object(p.a)((function(e){return{root:{"& > * + *":{marginTop:e.spacing(2)}},table:{minWidth:500},gridContainer:{padding:"2% 5% 2% 5%"},pagination:{display:"contents",alignItems:"center"}}}));function C(){var e=_(),t=i.a.useState(1),a=Object(j.a)(t,2),c=a[0],n=a[1],r=Object(o.b)(),d=Object(o.c)((function(e){return e.ProductDetailReducer.products})),s=Object(o.c)((function(e){return e.ProductDetailReducer.loading})),u=Object(o.c)((function(e){return e.ProductDetailReducer.search}));return Object(S.jsx)("center",{className:e.root,children:Object(S.jsxs)(O.a,{container:!0,spacing:2,className:e.gridContainer,justify:"center",children:[s?Object(S.jsx)("div",{}):d.data.map((function(e,t){return Object(S.jsx)(O.a,{item:!0,xs:12,sm:6,md:4,children:Object(S.jsx)(I,{productIndex:t,name:e.name,description:e.description,expiryDate:e.expiryDate,category:e.category,price:e.price})},Object(b.a)())})),s?Object(S.jsx)("div",{}):Object(S.jsx)(O.a,{item:!0,xs:12,sm:12,md:12,className:e.pagination,children:Object(S.jsx)(h.a,{count:d.totalPages,page:c,onChange:function(e,t){n(t),r({type:"PRODUCT_SET_LOADING"}),l(u.lastSearchString,t,d.limit).then((function(e){200==e.status&&(r({type:"PRODUCT_SET_RESULTS",payload:e.data}),r({type:"PRODUCT_RESET_LOADING"})),r({type:"PRODUCT_RESET_LOADING"})})).catch((function(e){r({type:"PRODUCT_RESET_LOADING"})}))}})},Object(b.a)())]})})}var P=a(41),N=a(80),L=a(197),A=a(198),w=a(213),U=a(15),G=a(81),M=a.n(G),k=a(82),F=a.n(k),q=a(199),W=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(P.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(P.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(U.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(U.c)(e.palette.common.white,.25)},marginLeft:0,paddingRight:50,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(P.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function B(){var e=W(),t=Object(c.useState)(""),a=Object(j.a)(t,2),i=a[0],n=a[1],r=Object(o.b)(),d=Object(o.c)((function(e){return e.ProductDetailReducer.products})),s=Object(o.c)((function(e){return e.ProductDetailReducer.loading})),u=Object(c.useRef)(Object(N.debounce)((function(e){r({type:"PRODUCT_SET_LOADING"}),r({type:"PRODUCT_SET_LAST_SEARCH",payload:{lastSearchString:e}}),l(e,1,d.limit).then((function(e){200==e.status&&(r({type:"PRODUCT_SET_RESULTS",payload:e.data}),r({type:"PRODUCT_RESET_LOADING"})),r({type:"PRODUCT_RESET_LOADING"})})).catch((function(e){r({type:"PRODUCT_RESET_LOADING"})}))}),500));return Object(c.useEffect)((function(){i?u.current(i):u.current("")}),[i]),Object(S.jsxs)("div",{className:e.root,children:[Object(S.jsx)(L.a,{position:"static",children:Object(S.jsxs)(A.a,{children:[Object(S.jsx)(m.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer",children:Object(S.jsx)(M.a,{})}),Object(S.jsx)(E.a,{className:e.title,variant:"h6",noWrap:!0,children:"Product Manager"}),Object(S.jsxs)("div",{className:e.search,children:[Object(S.jsx)("div",{className:e.searchIcon,children:Object(S.jsx)(F.a,{})}),Object(S.jsx)(w.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return n(e.target.value)}})]})]})}),s&&Object(S.jsx)(q.a,{})]})}var H=a(200),J=a(83),z=a.n(J),V=Object(p.a)((function(e){return{fab:{position:"fixed",bottom:e.spacing(4),right:e.spacing(4)}}}));function X(e){var t=V(),a=Object(o.b)();return Object(S.jsx)(H.a,{"aria-label":"Add",className:t.fab,color:"primary",size:"large",onClick:function(){a({type:"EDITADD_MODAL",payload:{editIndex:-1,isEdit:!1,showEditModal:!0}})},children:Object(S.jsx)(z.a,{})})}var Y=a(10),K=a(205),Q=a(211),Z=a(203),$=a(204),ee=a(201),te=a(206),ae=a(208),ce=a(212),ie=Object(p.a)((function(e){return{form:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},formControl:{marginTop:e.spacing(2),minWidth:120},formControlLabel:{marginTop:e.spacing(1)}}}));function ne(e){var t=ie(),a=Object(o.b)(),n=Object(o.c)((function(e){return e.ProductDetailReducer.loading})),r=Object(o.c)((function(e){return e.ProductDetailReducer.products})),d=Object(o.c)((function(e){return e.ProductDetailReducer.edit})),l=d.isEdit?r.data[d.editIndex]:{id:-1,name:"",description:"",price:"",expiryDate:"",categoryId:-1,category:{id:-1,name:"",image:""}},p=Object(c.useState)(""),b=Object(j.a)(p,2),h=b[0],g=b[1],m=Object(c.useState)(""),x=Object(j.a)(m,2),y=x[0],f=x[1],D=Object(c.useState)(""),E=Object(j.a)(D,2),v=E[0],T=E[1],R=Object(c.useState)(""),I=Object(j.a)(R,2),_=I[0],C=I[1],P=Object(c.useState)(""),N=Object(j.a)(P,2),L=N[0],A=N[1],w=Object(c.useState)(""),U=Object(j.a)(w,2),G=U[0],M=U[1],k=Object(c.useState)({productName:"",category:"",categoryImage:"",price:"",description:"",expiryDate:""}),F=Object(j.a)(k,2),q=F[0],W=F[1],B=Object(c.useState)(!0),H=Object(j.a)(B,2),J=H[0],z=H[1],V=Object(c.useState)(""),X=Object(j.a)(V,2),ne=X[0],re=X[1],oe=Object(c.useState)(""),de=Object(j.a)(oe,2),se=de[0],ue=de[1],le=function(){h||g(l.name),y||f(l.description),v||T(l.category.name),_||C(l.category.image),L||A(l.price.toString()),G||M(l.expiryDate)};Object(c.useEffect)((function(){J&&le()}));var je=function(){g(""),f(""),A(""),T(""),C(""),M(""),W({productName:"",category:"",categoryImage:"",price:"",description:"",expiryDate:""})},pe=function(e,t){"clickaway"!==t&&(re(""),ue(""))},Oe=function(e,t){z(!1),t(e.currentTarget.value)},be=function(e){200==e.status&&(a({type:"PRODUCT_RESET_LOADING"}),d.isEdit||je(),a({type:"AFTER_EDITADD_MODAL",payload:{data:{id:l.id,name:h,price:parseInt(L),expiryDate:G,description:y,category:{id:-1,name:v,image:_||r.data[d.editIndex].category.image}}}}),ue("Successfully Saved")),a({type:"PRODUCT_RESET_LOADING"})};return Object(S.jsx)(i.a.Fragment,{children:Object(S.jsxs)(Q.a,{open:d.showEditModal,onClose:function(){je(),re(""),ue(""),z(!0),a({type:"EDITADD_MODAL",payload:{editIndex:-1,isEdit:!1,showEditModal:!1}})},"aria-labelledby":"max-width-dialog-title",children:[Object(S.jsx)(ee.a,{id:"max-width-dialog-title",children:d.isEdit?"Edit a product detail":"Add a product"}),ne?Object(S.jsx)(ce.a,{open:ne,autoHideDuration:3e3,onClose:pe,elevation:6,variant:"filled",children:Object(S.jsx)(ae.a,{onClose:pe,severity:"warning",children:ne})}):Object(S.jsx)(i.a.Fragment,{}),se?Object(S.jsx)(ce.a,{open:se,autoHideDuration:3e3,onClose:pe,elevation:6,variant:"filled",children:Object(S.jsx)(ae.a,{onClose:pe,severity:"success",children:se})}):Object(S.jsx)(i.a.Fragment,{}),Object(S.jsxs)(Z.a,{children:[Object(S.jsx)($.a,{children:"To add/edit a new product, please fill the information and hit Save button."}),Object(S.jsx)("form",{className:t.form,noValidate:!0,children:Object(S.jsxs)(O.a,{container:!0,spacing:2,children:[Object(S.jsx)(O.a,{item:!0,xs:12,children:Object(S.jsx)(te.a,Object(Y.a)({variant:"outlined",required:!0,fullWidth:!0,id:"productName",label:"Product Name",name:"productName",autoComplete:"productName",autoFocus:!0,onChange:function(e){return Oe(e,g)},value:J?l.name:h},q.productName&&{error:!0,helperText:q.productName}))}),Object(S.jsx)(O.a,{item:!0,xs:12,children:Object(S.jsx)(te.a,Object(Y.a)({variant:"outlined",required:!0,fullWidth:!0,multiline:!0,rows:2,id:"description",label:"Description",name:"description",autoComplete:"description",value:J?l.description:y,onChange:function(e){return Oe(e,f)}},q.description&&{error:!0,helperText:q.description}))}),Object(S.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(te.a,Object(Y.a)({autoComplete:"category",name:"category",variant:"outlined",required:!0,fullWidth:!0,id:"category",label:"Category",value:J?l.category.name:v,onChange:function(e){return Oe(e,T)}},q.category&&{error:!0,helperText:q.category}))}),Object(S.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(te.a,Object(Y.a)({variant:"outlined",fullWidth:!0,id:"categoryImage",label:"Category Image Link",name:"categoryImage",value:J?l.category.image:_,onChange:function(e){return Oe(e,C)}},q.categoryImage&&{error:!0,helperText:q.categoryImage}))}),Object(S.jsx)(O.a,{item:!0,xs:12,children:Object(S.jsx)(te.a,Object(Y.a)({variant:"outlined",required:!0,fullWidth:!0,type:"number",id:"productPrice",label:"Price",name:"productPrice",onChange:function(e){return Oe(e,A)},value:J?l.price:L},q.price&&{error:!0,helperText:q.price}))}),Object(S.jsx)(O.a,{item:!0,xs:12,children:Object(S.jsx)(te.a,Object(Y.a)({variant:"outlined",required:!0,fullWidth:!0,type:"date",id:"expiryDate",name:"expiryDate",onChange:function(e){return Oe(e,M)},value:J?l.expiryDate:G},q.expiryDate&&{error:!0,helperText:q.expiryDate}))}),Object(S.jsx)(O.a,{item:!0,xs:12,children:Object(S.jsx)(K.a,{onClick:function(){le(),function(){var e={};return h||(e.productName="Product Name is required."),y?y&&y.length<50&&(e.description="Description should be atleast 50 letters."):e.description="Description is required.",v||(e.category="Category is required."),d.isEdit||_||(e.categoryImage="Image is required if adding a new product."),L||(e.price="Price is required."),G||(e.expiryDate="Expiry date is required."),W(Object(Y.a)({},e)),Object.values(e).every((function(e){return""==e}))}()&&(re(""),ue(""),a({type:"PRODUCT_SET_LOADING"}),d.isEdit?function(e,t,a,c,i){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",r=arguments.length>6?arguments[6]:void 0;return s.a.put("".concat(u,"/api/product/").concat(r),{name:e,description:t,price:a,expiryDate:c,categoryName:i,image:n})}(h,y,L,G,v,_,l.id).then((function(e){be(e)})).catch((function(e){a({type:"PRODUCT_RESET_LOADING"}),re("Bad Input")})):function(e,t,a,c,i){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return s.a.post("".concat(u,"/api/product"),{name:e,description:t,price:a,expiryDate:c,categoryName:i,image:n})}(h,y,L,G,v,_).then((function(e){be(e)})).catch((function(e){a({type:"PRODUCT_RESET_LOADING"}),re("Bad Input")})))},disabled:n,fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Save"})})]})})]})]})})}function re(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),a=t[0],i=t[1];return Object(S.jsxs)("div",{children:[Object(S.jsx)(B,{}),Object(S.jsx)(C,{}),Object(S.jsx)(X,{showForm:i}),Object(S.jsx)(ne,{setOpenFrom:i,openForm:a})]})}var oe=function(){var e=Object(o.b)();return Object(c.useEffect)((function(){e({type:"PRODUCT_SET_LOADING"}),l().then((function(t){200==t.status&&(e({type:"PRODUCT_SET_RESULTS",payload:t.data}),e({type:"PRODUCT_RESET_LOADING"})),e({type:"PRODUCT_RESET_LOADING"})})).catch((function(t){e({type:"PRODUCT_RESET_LOADING"})}))}),[]),Object(S.jsx)("div",{style:{overflowX:"hidden",overflowY:"hidden"},children:Object(S.jsx)(re,{})})},de=a(46),se={products:{data:[],limit:6,currentPage:1,total:0,totalPages:0},loading:!0,search:{currentSearchString:""},edit:{editIndex:-1,isEdit:!1,showEditModal:!1},delete:{deleteIndex:-1,showDeleteModal:!1}};var ue=Object(de.b)({ProductDetailReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_SET_RESULTS":return Object(Y.a)(Object(Y.a)({},e),{},{products:Object(Y.a)({},t.payload)});case"PRODUCT_SET_LOADING":return Object(Y.a)(Object(Y.a)({},e),{},{loading:!0});case"PRODUCT_RESET_LOADING":return Object(Y.a)(Object(Y.a)({},e),{},{loading:!1});case"PRODUCT_SET_LAST_SEARCH":var a=t.payload.lastSearchString;return Object(Y.a)(Object(Y.a)({},e),{},{search:{lastSearchString:a}});case"EDITADD_MODAL":var c=t.payload,i=c.editIndex,n=c.isEdit,r=c.showEditModal;return Object(Y.a)(Object(Y.a)({},e),{},{edit:{editIndex:i,isEdit:n,showEditModal:r}});case"AFTER_EDITADD_MODAL":var o=t.payload.data;return e.edit.isEdit||e.products.data.push(o),Object(Y.a)(Object(Y.a)({},e),{},{products:Object(Y.a)(Object(Y.a)({},e.products),{},{data:e.products.data.map((function(t,a){return a==e.edit.editIndex?Object(Y.a)(Object(Y.a)({},o),{},{category:Object(Y.a)({},o.category)}):t}))})});case"DELETE_MODAL":var d=t.payload,s=d.deleteIndex,u=d.showDeleteModal;return Object(Y.a)(Object(Y.a)({},e),{},{delete:{deleteIndex:s,isEdit:n,showDeleteModal:u}});default:return e}}}),le=a(84),je=Object(de.c)(ue,Object(de.a)(le.a)),pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,214)).then((function(t){var a=t.getCLS,c=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),i(e),n(e),r(e)}))};r.a.render(Object(S.jsx)(o.a,{store:je,children:Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(oe,{})})}),document.getElementById("root")),pe()}},[[132,1,2]]]);
//# sourceMappingURL=main.d64d7421.chunk.js.map